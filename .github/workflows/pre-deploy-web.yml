name: Web - Accessibility Testing and Deployment

on:
  push:
    branches: [ development, main]
    paths:
      - 'web/**'
      - 'bin/**'
      - '.github/workflows/pre-deploy-web.yml'
      - '.github/workflows/test-and-deploy-reusable.yml'
  pull_request:
    branches: [ development, main ]
    paths:
      - 'web/**'
      - 'bin/**'
      - '.github/workflows/pre-deploy-web.yml'
      - '.github/workflows/test-and-deploy-reusable.yml'

jobs:
  test-and-deploy:
    uses: ./.github/workflows/test-and-deploy-reusable.yml
    with:
      application: 'web'
      deploy-path: '/var/www/web.witchcraft-and-wizardy.school'
    secrets:
      WAVE_API_KEY: ${{ secrets.WAVE_API_KEY }}
      NGROK_AUTHTOKEN: ${{ secrets.NGROK_AUTHTOKEN }}
      SERVER_USERNAME: ${{ secrets.SERVER_USERNAME }}
      SERVER_SSH_KEY: ${{ secrets.SERVER_SSH_KEY }}