\documentclass[a4paper, 12pt]{article}

% include required packages
\usepackage[T1]{fontenc}                   % Font encoding for special characters
\usepackage{pmboxdraw}                     % Support for box-drawing characters
\usepackage{booktabs}                      % For better table formatting
\usepackage{enumitem}                      % For customizing lists
\usepackage{float}                         % For [H] table placement
\usepackage[a4paper, margin=2cm]{geometry} % Set page margins
\usepackage{indentfirst}                   % Indent first paragraph of sections
\usepackage[utf8]{inputenc}                % UTF-8 input encoding
\usepackage{listings}                      % For code listings
\usepackage[round,authoryear]{natbib}      % For citations
\usepackage{tikz}                          % For drawing diagrams
\usepackage{url}                           % For formatting URLs
\usepackage{verbatim}                      % For including verbatim files
\usepackage{xcolor}                        % For colors
\usetikzlibrary{positioning}               % For relative positioning

% set paragraph and list formatting
\setlength{\parindent}{1.5em}
\setlength{\parskip}{0pt}
\setlist[itemize]{noitemsep,topsep=0pt,parsep=0pt,partopsep=0pt,after=\vspace{0.5em}}

% set title information
\title{A critical reflection on refactoring the Web Witchcraft and Wizardry project}
\author{Edmund Mulligan}
\date{\today}

% Configure listings for JSON
\lstdefinelanguage{json}{
    basicstyle=\small\ttfamily,
    numbers=left,
    numberstyle=\tiny,
    stepnumber=5,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{gray!10},
}

% document start
\begin{document}

% set bibliography style and page numbering
\bibliographystyle{plainnat}
\pagenumbering{arabic}

\maketitle

\begin{abstract}
\textit{Abstract goes here.}
\end{abstract}

\section{Introduction}

Web Witchcraft and Wizardry \citep{mulligan2024witchcraftandwizardry} is a website for children  
to learn the basics of web development through fantasy-themed metaphors. The original version of 
the website was neither accessible (except by accident) nor responsive. This essay reflects on the 
design and implementation of a refactored version of the project, focusing on accessibility, 
architecture, and quality of the new code. Detailed decisions are documented as comments in 
the source code, which should be read alongside this essay, so the essay focuses on higher level
design decisions and reflections.

For reference the old and new landing pages can be seen in figures~\ref{fig:old-landing-page} 
and~\ref{fig:new-landing-page}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{screenshots/Original Website.png}
    \caption{Old landing page}
    \label{fig:old-landing-page}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{screenshots/New Website.png}
    \caption{New landing page}
    \label{fig:new-landing-page}
\end{figure}


The development process used was iterative and incremental \citep{beck2004extreme}, and 
while there are many criticisms of this approach, particularly around its lack of documentation, 
endles changes and lack of scalability to large teams (see, for example, \cite{boehm2004balancing}), 
it was well suited to this small project with a single developer fulfilling all team roles.

\section{Fundamental Design Choices}


\section{Responsiveness and Accessibility}
A primary goal of the refactor was to make the website responsive and accessible.

\section{Site Architecture and Navigation}

information arcitecture and layout choices
navigation design
site navigation vs page navigation


\section{Testing}
Testing software is not only a critical part of development 
(\cite{myers2011art},\cite{mesbah2012invariant}), but it is also difficult and 
time consuming. Many authorities (e.g. \cite{boehm1981software}, \cite{jones2008applied})
claim that testing can take at least 50\% of total development time, and that concurs with 
my experience.

My approach to testing was to automate as much as possible using
open source tools (see Appendix B for results). The tests were designed to check for compliance 
with web standards and (given the age of the target users) text readability. Both static and 
dynamic tesing tools \citep{myers2011art} were used \textendash{} static tools to check code 
validity, and dynamic tools to check accessibility and performance of the rendered pages.

The tests were run frequently during development to catch issues early and ensure that the 
code remained compliant as code was refactored (regression testing). A github action was 
written to ensure the tests were run whenver code was pushed to the remote development and 
main branches in github. Testing tools were discovered using a google search and the most 
popular ones were chosen:

\begin{itemize}
    \item Lighthouse \citep{lighthouse2024}
    \item Axe \citep{axe2024}
    \item Pa11y \citep{pa11y2024}
    \item Wave \citep{wave2024} 
\end{itemize}

A script to check reading age using the Flesch-Kincaid formula 
\citep{flesch1948new} was also developed. Code was checked 
for validity using node.js modules html-validate \citep{htmlvalidate2024},
stylelint \citep{stylelint2024} and eslint \citep{eslint2024}. The official W3C 
validator for CSS \citep{w3c_css_validator} was not used as this cannot currently validate 
code with CSS variables. A simple script was written to ensure all files contained valid 
header comments. Browser compatibility was tested
using Playwright \cite{playwright2024} to run tests in multiple browsers and I acknowledge, 
with thanks, the assistance I received to get this working from a senior tester colleague at 
TfL. This allowed automated testing of all three major browser engines (Chrome, Firefox and 
Safari), although only the latest version of each was tested. Playwright has potential for 
much more and could enable a test driven developmeent (TDD,~\cite{beck2003test}) approach in 
future phases of this project.

Implementing Wave testing was the most difficult as it requires a public URL to test and 
github pages are based on a private repository. Making the github repository public was 
considered and rejected as it could introduce unanticipated security risks so, after 
consultation with testing colleagues, ngrok \citep{ngrok2024} was used to expose the 
localhost to allow Wave tests to complete.

There was insufficient time to fully evaluate the third party tools used and decide which 
was the best for this project, so a `black box' approach was taken without investigaing exactly 
what each tool was testing. This did have the benefit that gaps in one tool's coverage 
could potentally be caught by one of the other tools, but it did introduce a problem of 
tools having conflicting standards. Wave, in particular requires the <h1> element to be in 
the <main> section, which would mean that the site title in the <header> section would have to 
be either an <h2> or a <p> element, which would be flagged by the other testing tools. Thus 
a decision to accept the warning from Wave was taken as the least bad alternative. The other 
alert from Wave was for the use of <noscript>, but this was simply a warning to check this 
usage as it may have accessibility implcations.

Automated testing is not a substitute for manual testing, and the site was also tested manually
on a variety of devices, specifically

\begin{itemize}
    \item A computer with a mouse and keyboard (running Linux Mint)
    \item A computer without using a mouse (to test keyboard navigation)
    \item A computer with a screen reader (Linux Orca)
    \item A touchscreen tablet device without mouse or keyboard (running Android)
    \item A mobile phone (running Android)
\end{itemize}

I did not have access to an iOS device so could not test on Apple hardware.

The website was NOT tested with JavaScript disabled and this is acknowleged as a limitation
of the current testing, driven by the available time. User testing was 
also not possible within the time constraints, but will be essential in the later phases 
where actual lessons are implemented. In particular, expert testing 
from an experienced teacher will be needed to ensure the content is age appropriate 
and pedagogically sound.

\section{Third party credits and resources}
All code submitted for assessment is my own work. No code has been copied from 
any external sources, such as online tutorials or code. I have, however,  relied 
heavily on two YouTube channels, those of Kevin Powell \citep{powell_youtube} and 
Coding2GO \citep{coding2go_youtube}, for guidance on best practices and inspiration.

No Generative AI was used in creating code for this project, but I did make extensive 
use of Google Search which automatically generates AI summaries that cannot be disabled. 
I partly mitigated this by using Google Scholar where appropriate which at the moment 
does not use user accessible AI. I also used Stack Overflow \citep{stackoverflow2025} 
to troubleshoot specific issues I encountered.

The automation tools used for testing accessibility and performance (Lighthouse, Axe, 
pa11y, Wave) are all open source tools developed by third parties and the scripts used 
to run them were adapted from examples found in their respective documentations and in 
online resources. I was assisted by a colleague at my employer, Transport for London, 
in writing the playwright tests used for testing browser compatibility.

\section{Outstanding issues and Future Improvements}
The poject submitted for assessment is phase one of a larger project to refactor and
improve the Web Witchcraft and Wizardry website. Some content was deliberatly ommitted 
from this phase as it will be developed in phase 2 using JavaScript. There are alo 
some known issues and areas for improvement that could not be addressed within the
time constraints of this phase.

\begin{table}[h]
\centering
\begin{tabular}{|l|p{4cm}|p{4cm}|p{4cm}|}
\hline
\textbf{Bug Id} & \textbf{Description} & \textbf{Symptoms} & \textbf{Work around} \\
\hline
1 & Reactive code does not work well at extreme viewport sizes & Text overflows boxes or content does not fill screen properly. & Warning displayed when viewport is too small. \\
\hline
\end{tabular}
\caption{Known issues and workarounds}
\label{tab:bugs}
\end{table}

responsive design techniques
Fluid grids, flexible images, and media queries \citep{marcotte2010responsive}
prefer responsive 
Viewport cutoffs
< 80px too small \textendash{} unusable
80px \textendash{} 200px very small \textendash{} give warning but still usable
200px \textendash{} 800px small \textendash{} mobile layout \textendash{} prefer vertical stacking
> 800phx \textendash{} desktop layout \textendash{} prefer horizontal layout

accessibility features implemented


grid vs flexbox
use of media queries
semantic HTML
ARIA roles and attributes
colour contrast
keyboard navigation
alt text for images
form accessibility

dry code \citep{hunt1999pragmatic}

\section{Conclusion}

% Include word count N.B. Run wordcount.sh to generate wordcount.txt before compiling
\section*{Word count}
Word count: \input{wordcount.txt} words (excluding references)
\\
\bibliography{EdmundLibrary}

% include appendix
\newpage
\appendix
\section*{Appendices}
\input{essay-2-appendix.tex}

\end{document}
