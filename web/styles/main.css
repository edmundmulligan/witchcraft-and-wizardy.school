/*
 **********************************************************************
 * File       : main.css
 * Author     : Edmund Mulligan <edmund@edmundmulligan.name>
 * Copyright  : (c) 2025 The Embodied Mind
 * License    : MIT License (see license-and-credits.html page)
 * Description:
 *   This is the main stylesheet for the Web Witchcraft and Wizardry website.
 *   It defines global styles that apply to all pages of the site and should
 *   be the first stylesheet linked from all HTML files.
 **********************************************************************
 */

 /*
  **********************************************************************
  * Define semantic names for colours to be used on all pages
  * N.B. Use colour names not hex codes for better code readability
  **********************************************************************
  */

:root {
    /* light theme colours */
    --color-light-page-background:     lightgoldenrodyellow;
    --color-light-page-text:           darkgreen;
    --color-light-headings-background: lightcyan;
    --color-light-headings-text:       purple;
    --color-light-link-text:           darkgreen;
    --color-light-link-text-hover:     lightblue;
    --color-light-link-text-visited:   darkblue;
    --color-light-link-text-focus:     darkblue;
    --color-light-error-background:    darkred;
    --color-light-error-text:          white;
    --color-light-warning-background:  red;
    --color-light-warning-text:        white;

    /* dark theme colours */
    --color-dark-page-background:      #0a3d0a; /* very dark green */
    --color-dark-page-text:            #c8ffc8; /* lighter green */
    --color-dark-headings-background:  #1a5c1a; /* dark teal green */
    --color-dark-headings-text:        #ff6; /* light yellow */
    --color-dark-link-text:            #90ee90; /* light green */
    --color-dark-link-text-hover:      darkgreen;
    --color-dark-link-text-visited:    #add8e6; /* light blue */
    --color-dark-link-text-focus:      #add8e6; /* light blue */
    --color-dark-error-background:     lightcoral;
    --color-dark-error-text:           black;
    --color-dark-warning-background:   red;
    --color-dark-warning-text:         white;

    /* Active theme colors - default to light, overridden by theme-switcher.js */
    --color-page-background:           var(--color-light-page-background);
    --color-page-text:                 var(--color-light-page-text);
    --color-headings-background:       var(--color-light-headings-background);
    --color-headings-text:             var(--color-light-headings-text);
    --color-link-text:                 var(--color-light-link-text);
    --color-link-text-hover:           var(--color-light-link-text-hover);
    --color-link-text-visited:         var(--color-light-link-text-visited);
    --color-link-text-focus:           var(--color-light-link-text-focus);
    --color-error-background:          var(--color-light-error-background);
    --color-error-text:                var(--color-light-error-text);
    --color-warning-background:        var(--color-light-warning-background);
    --color-warning-text:              var(--color-light-warning-text);

    /* Background images for light and dark themes */
    --bg-landscape-light:              url('../images/background-landscape-light-web.svg');
    --bg-landscape-dark:               url('../images/background-landscape-dark-web.svg');
    --bg-portrait-light:               url('../images/background-portrait-light-web.svg');
    --bg-portrait-dark:                url('../images/background-portrait-dark-web.svg');
    
    /* Active background images - default to light, overridden by theme-switcher.js */
    --bg-landscape:                    var(--bg-landscape-light);
    --bg-portrait:                     var(--bg-portrait-light);

    /* SVG filter for theme switching */
    --svg-filter-light:                none;
    --svg-filter-dark:                 none;
    --svg-filter:                      var(--svg-filter-light);

    /* SVG filter for header silhouettes - yellow in dark mode */
    --header-svg-filter-light:         none;
    --header-svg-filter-dark:          none;
    --header-svg-filter:               var(--header-svg-filter-light);

    /* other global variables to ensure sitewide consistency */
    --border-radius:          2rem;
    --border-weight:          0.2rem;
    --border-weight-thin:     0.1rem;
    --border-style:           solid;

    /* responsive font and button sizes using clamp() */
    
    /* see https://modern-fluid-typography.vercel.app for a size calculator */

    --fontsize-p:             clamp(0.5rem, 2vw + 1rem, 2.25rem);
    --fontsize-smallprint:    clamp(0.5rem, 1.5vw + 0.75rem, 1.75rem);
    --fontsize-largeprint:    clamp(1rem, 3vw + 1rem, 3rem);
    --fontsize-h1h2:          clamp(0.875rem, 2vw + 1rem, 2.5rem);
    --fontsize-h3h4:          clamp(0.8rem, 2vw + 1rem, 2.5rem);
    --fontsize-button:        clamp(0.75rem, 1vw + 1rem, 4rem);
    --fontsize-button-circle: clamp(0.75rem, 1vw + 0.75rem, 1.5rem);
    --fontsize-nav-site:      clamp(0.875rem, 2vw, 1rem);
    --fontsize-nave-page:     clamp(0.5rem, 2vw + 1rem, 2.25rem);
    --buttonsize-circle:      clamp(4rem, 8vw + 5rem, 12rem);
    --margin-vertical:        clamp(0.333rem, 0.5vw + 0.5rem, 1rem);;
    --margin-horizontal:      clamp(0.333rem, 1vw + 1rem, 2rem);;

    /* 
        there are probably more things that could be defined here 
        to ensure sitewide consistency such as margin and padding
        sizes, but that means more refactoring and this is a good start
    */
}

/*
 *******************************************************
 * Element styles
 *******************************************************
 */

body {
    /* create positioning context for absolutely positioned child elements */
    position: relative;

    /* use flexbox to layout header, main and footer vertically */

    /* probably not neccessary, but it does allow align-items to be used */
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;

    /* prevent horizontal overflow */
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    box-sizing: border-box;
    overflow-wrap: break-word;

    /*
    * use a readable font for body text
    * N.B. These are inherited by child elements unless overridden
    */

    font-family: "Open Sans", -apple-system, sans-serif;
    font-style: normal;
    line-height: 1.6;
    text-align: left;
    color: var(--color-page-text);
    background-color: var(--color-page-background);
}

/* Use body:before to stop the background image scrolling */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /* set background image handling (actual image is selected in index.css 
       as that is the only page to use a background image) */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;

    /* ensure the background image tranparent so it
       takes a tint of the site background colour */
    z-index: -1;
}

header {
    flex-shrink: 1;  /* Allow header to shrink */
    flex-grow: 0;  /* Prevent header from growing */
}

main {
    flex-shrink: 1;  /* Allow main to shrink */
    flex-grow: 1;  /* Allowsmain to grow and fill available space */
    max-width: 100%;
    box-sizing: border-box;
    overflow-wrap: break-word;
    width: 100%;
}

footer {
    flex-shrink: 1;  /* Allow footer to shrink */
    flex-grow: 0;  /* Prevent footer from growing */
}

/* Center all headings and use Cinzel (an elegant serif Google font) */
h1, h2, h3, h4, h5, h6 {
    /* Use Cinzel font for headings */
    font-family: Cinzel, serif;
    font-weight: 600;
    text-align: center;
}

/* make h1 and h2 larger and bolder */
h1, h2{
    font-size: var(--fontsize-h1h2);
    font-weight: 700;
}

/* h3 not quite as big */
h3, h4{
    font-size: var(--fontsize-h3h4);
    font-weight: 700;
}

/* increas spacing for paragraphs in accordance with WCAG 2.2 */
p {
    font-size: var(--fontsize-p);
    margin-bottom: 1.5rem;
}

/*
 **************************************************
 * Styles for general link pseudo elements
 **************************************************
 */

 /* do not distinguish between a visited and non-visited link */
 a:link,
 a:visited {
    color: var(--color-link-text);
    text-decoration: underline;
    font-weight: 800;
}

a:hover,
a:focus-visible {
    color: var(--color-link-text-focus);
}

/* this may be a bit subtle but it meets WCAG 2.2 guidelines */
a:focus-visible {
    outline: var(--border-weight-thin) dashed var(--color-link-text-focus);
    outline-offset: 0.2rem;
}

/* Utility class to mirror an image horizontally. Used by the wizard 
   silhouette in the header as the original image faces the wrong way */
.mirror {
    transform: scaleX(-1);
}

/* Make SVG images with black strokes/fills lighter in dark mode */
img[src$=".svg"] {
    filter: var(--svg-filter, none);
}
